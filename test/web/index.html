<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">

	<title>MCS Web Test</title>
	<meta name="description" content="MCS Web Test">
	<meta name="author" content="Pandawan">

	<style>
	html, body {
		font-family: sans-serif;
		font-size: 24;
		color: white;
		background-color: #21252B;
	}
	#content {
		margin: 1em;
		font-family: monospace;
		background-color: #282C34;
		color: #ABB2BF;
		padding: 1em;
	}
	#header {
		text-align: center;
		color: white;
		font-weight: bold;
	}
	button {
		margin-top: 1em;
	}
	</style>
</head>
<body>
	<h1>mcs web test</h1>
	<p id="header">input.mcs</p>
	<pre id="content">
function hello {
	execute @a ~ ~ ~ {
		execute @p ~ ~ ~ {
			var hey = dummy
			hey @s = 10
			function(hey)
			function(hey, hai)
		}
	}
	function(test)
}
	</pre>
	<button onclick="convert();" id="btn">Convert</button>
	<script src="./mcs.js"></script>
	<script>
	var converted = false;
	String.prototype.replaceAll = function(search, replacement) {
    	var target = this;
    	return target.replace(new RegExp(search, 'g'), replacement);
	};
	var btn = document.getElementById('btn');
	var ct = document.getElementById('content');
	var hd = document.getElementById('header');

	function convert () {
		if (!converted) {
			var newCt = mcs(ct.textContent);
			console.log(newCt);
			// Return the value, escape new lines, remove quotes around the string
			ct.textContent = JSON.stringify(Object.values(newCt)[0]).replaceAll(/\\n/,'\n').slice(1, -1);
			btn.textContent = 'Back';
			hd.textContent = Object.keys(newCt)[0];
			converted = true;
		} else {
			btn.textContent = 'Convert';
			ct.textContent = 'function hello {\nexecute @a ~ ~ ~ {\nexecute @p ~ ~ ~ {\n\t\t\tvar hey = dummy\n\t\t\they @s = 10\n\t\t\tfunction(hey)\n\t\t\tfunction(hey, hai)\n\t\t}\n\t}\n\tfunction(test)\n}';
			hd.textContent = 'input.mcs';
			converted = false;
		}
	}
	</script>
</body>
</html>
